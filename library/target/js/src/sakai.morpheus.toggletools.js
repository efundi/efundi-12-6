portal=portal||{};if(portal.toolsCollapsed===undefined){portal.toolsCollapsed=false}portal.updateToolsCollapsedPref=function(b){var a="/direct/userPrefs/updateKey/"+portal.user.id+"/sakai:portal:sitenav?toolsCollapsed="+b;$PBJQ.ajax(a,{method:"PUT",cache:false})};portal.toggleMinimizeNav=function(){$PBJQ("body").toggleClass("Mrphs-toolMenu-collapsed");$PBJQ("#subSites.floating").css({display:"none"});var a=$PBJQ(this);a.toggleClass("min max").parent().toggleClass("min max");if(portal.toolsCollapsed){portal.updateToolsCollapsedPref(false);portal.toolsCollapsed=false;a.attr("aria-pressed",false)}else{portal.updateToolsCollapsedPref(true);portal.toolsCollapsed=true;a.attr("aria-pressed",true)}};$PBJQ("#toolsNav-toggle-li button").on("click",portal.toggleMinimizeNav);$PBJQ(document).ready(function(){$PBJQ("#toggleSubsitesLink").click(function(d){var c=$PBJQ(this);if($PBJQ("#subSites").css("display")=="block"){$PBJQ("#subSites").hide();$PBJQ("#subSites").removeClass("floating")}else{var a=c.position();var f=(-1*($PBJQ("#toolMenu").height()-a.top));var b=(MorpheusViewportHelper.isPhone())?{display:"block",left:"-0.7rem",top:0,"margin-top":"0.3rem",overflow:"hidden"}:{display:"block",left:a.left+c.width()+6+"px",top:f+"px"};$PBJQ("#subSites").css(b);$PBJQ("#subSites").addClass("floating");if($PBJQ("#toggleSubsitesLink").position().top<240){$PBJQ("#subSites.floating").addClass("ontop")}}})});